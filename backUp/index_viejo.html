<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:ital,wght@0,100..900;1,100..900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <title>Luciano Candotti | Diseñador Gráfico, Desarrollador Front-End</title>
</head>
<body>


    <!-- intro -->
    <section id="intro">
        <div class="container">
            <h1 class="text-dark pt-5">Mi nombre es <span class="fw-bold">Luciano Candotti,</span><br>soy Diseñador Gráfico—Audiovisual con 15+ años de experiencia.</h1>
            <h2 class="py-3 fw-light">Me especializo en <span class="fw-semibold">Branding y Desarrollo Front-End,</span> y destaco este último como fortaleza, pues implemento en el código mi habilidad estética.</h2>
            <h3 class="pb-4"><span class="fw-light text-black-50">Si funciona en blanco y negro = funciona siempre.</span><h3>
        </div>
    </section>
    
    <!-- contenedor de proyecto abierto -->
    <div id="project"></div>

    <!-- galería de proyectos -->
    <section id="grilla"></section><div id="output"></div></section>

   <script>
    /* función autoinvocada, sin nombre por eso se invoca al final con () */

    (function () { 
        fetch('post.json')
        .then((res) => res.json())
        .then((data) => {
            let output = '';
            data.forEach(function(post){
                /* Construímos los divs con la info + las imgs

                Dentro del div usamos col-lg-4 separa la grilla en 3 en pantalla grande
                col-md-6 separa la grilla en 3 en pantalla mediana, y en pequeño se apila todo a 1 columna
                img-fluid es para que sea flexbox  */

                output += `
                    <div class="col-lg-4 col-md-6 pb-4">
                        <div class="card bg-light px-3 shadow-lg rounded-0">
                            <h3 class="fs-4 text-dark pt-3 pb-2">${post.title}</h3>
                            <div class="overflow-hidden">
                                <a id="${post.id}" href="javascript:getProject('${post.id}')">
                                   <img class="img-fluid rounded-0 hover-zoom" style="transition: transform 0.5s ease;" src="./img/${post.id}/1.jpg">
                                </a>
                            </div>
                            <p class="pt-3 text-muted">${post.intro}</p>
                        </div>
                    </div>
                `;
            });
            let grilla =`
                <div class="container py-4">
                    <div class="row">
                        ${output}
                    </div>
                </div>
            `;
            document.getElementById('output').innerHTML = grilla;
        })
    })();


    // Cargamos el proyecto arriba de la grilla
    function getProject(id) {
        fetch('post.json')
        .then((res) => res.json())
        .then((data) => {
            let imgInsert = '';
            // Encontramos el proyecto con id al que hicimos click
            const project = data.find(project => project.id === id);
            
            //console.log(project); // Imprime el proyecto encontrado
            
            // Verificamos que encontramos el proyecto
            if (project) {
                // Cargamos todas las url/img en un string
                for(let img = 2; img <= project.cant; img++) {
                imgInsert += `<img class="img-fluid pb-4" src="./img/${project.id}/${img}.jpg">`;
                }
                
                // Construimos el contenedor con todas las imágenes
                let grilla = `
                <div class="container pt-5">
                    <h1 class="pb-4 text-dark">${project.title}</h1>
                    <h2 class="pb-3 text-dark fw-light">${project.descript}</h2>
                    <div class="row mb-4">
                        <div class="col-12 col-md-6 mb-3 mb-md-0">
                            <p>${project.intro}</p>
                        </div>
                        <div class="col-12 col-md-6 text-md-end">
                            <p><a href="https://${project.link}/" target="_blank">${project.link}</a> | ${project.date}
                            <br><a href="javascript:getClose()"><i class="bi bi-x-circle align-text-bottom"></i> cerrar</a></p>
                        </div>
                    </div>
                    <a id="projector" href="javascript:getClose()">
                        <div class="row">
                            ${imgInsert}
                        </div>
                    </a>
                </div>
                `;

                
                document.getElementById('project').innerHTML = grilla;
                location.href = "#project";
            } else {
                console.error(`No se encontró un proyecto con id '${id}'`);
            }
        })
        .catch(error => {
        console.error("Error al cargar los datos:", error);
        });
    };

    function getClose(){
        document.getElementById('project').innerHTML = '';
        //document.body.scrollTop = document.documentElement.scrollTop = 0;
        location.href = "#project";
        //document.body.style.backgroundColor = '#0f0f0f';
    }

   </script>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>
</html>