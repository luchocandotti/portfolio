<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luciano Candotti | Diseñador Gráfico, Desarrollador Front-End</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:ital,wght@0,100..900;1,100..900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <meta property="og:title" content="Luciano Candotti"/>
    <meta property="og:url" content="https://www.lcandotti.com"/>
    <meta property="og:image" content="https://www.lcandotti.com/folio.jpg"/>
    <meta property="og:description" content="Me especializo en Branding y Desarrollo Front-End, este último como diferencial, pues implemento en código mi habilidad estética."/>
</head>
<body>
    <!-- intro ------------------------------------------------------------------------------------------------------------ -->
    <section id="intro">
        <div class="container">
            <h1 class="text-dark pt-5">Soy <strong>Luciano Candotti,</strong><br>Diseñador Gráfico—Audiovisual con 15+ años de experiencia.</h1>

            <h2 class="py-3 fw-light">Me especializo en <span class="fw-semibold">Branding y Desarrollo Front-End,</span> este último como diferencial, pues implemento en código mi habilidad estética.</h2>

            <!-- <p>click para jugar <i class="bi bi-arrow-down align-text-middle fs-6"></i></p> -->
            <a id="color" href="#"><h3 class="pb-4 fw-light">Si funciona en blanco y negro = funciona siempre<span class="cursor">|</span><h3></a>
    <!-- about ------------------------------------------------------------------------------------------------------------- -->
            <section class="row mb-3">
                <div class="col-12 col-md-6 mb-md-0 h6 lh-base">
                    <p>Mi método es la <span class="fw-semibold">claridad para abordar problemas complejos con soluciones simples</span> <span class="fst-italic">a primera vista.</span> Esto, respaldado por un control estético que no sólo vuelve todo más atractivo, sino que reduce la fricción <span class="fw-semibold">(UI-UX)</span> entre usuario y aplicación: maximizando la usabilidad que resultará en una mejor relación del usuario con el producto/servicio.</p>
                </div>
                <div class="col-12 col-md-6 mb-md-0 h6 lh-base">
                    <p>Manejo <span class="fw-semibold">HTML | CSS | Javascript Nativos:</span> lo que me permite realizar sitios web dinámicos completamente customizables. Así mismo utilizo librerías como <span class="fw-semibold">Bootstrap,</span> para cuando el tiempo es poco y no se puede comprometer la calidad gráfica.</p>

                        <div class="form-check form-switch me-2">
                            <input class="form-check-input" type="checkbox" id="skillsToggle" style="position: relative; top: -0.1px;" data-bs-toggle="collapse" data-bs-target="#skills">
                            <label id="toggle" class="form-check-label" for="skillsToggle">Habilidades técnicas</label>
                        </div>
                    </p>
                </div>
            </section>
    <!-- skills --------------------------------------------------------------------------------------------------------- -->
            <section class="collapse mt-3" id="skills">
                <div class="row mb-3">
                    <div class="col-12 col-md-6 mb-md-0 h6 lh-base">
                        <h2 class="h5 pb-3 fw-light">Conocimientos</h3>
                        <table class="table h6 fw-light">
                            <tbody>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Diseño gráfico</th>
                                <td class="text-end pe-0">100%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Fotografía</th>
                                <td class="text-end pe-0">100%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Retoque fotográfico</th>
                                <td class="text-end pe-0">100%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Filmación</th>
                                <td class="text-end pe-0">100%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Edición de video</th>
                                <td class="text-end pe-0">100%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Programación FrontEnd</th>
                                <td class="text-end pe-0">60%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Ilustración digital</th>
                                <td class="text-end pe-0">50%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Animación en AfterEffect</th>
                                <td class="text-end pe-0">30%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Campañas en redes sociales <span class="fw-light">[Google Ads - Meta Bussines].</span></th>
                                <td class="text-end pe-0">20%</td>
                              </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-12 col-md-6 text-md-0 h6 lh-base">
                        <h2 class="h5 pb-3 fw-light">Idiomas</h3>
                        <table class="table h6 fw-light">
                            <tbody>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Español</th>
                                <td class="text-end pe-0">100%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">Português</th>
                                <td class="text-end pe-0">90%</td>
                              </tr>
                              <tr>
                                <th class="ps-0 fw-semibold" scope="row">English</th>
                                <td class="text-end pe-0">75%</td>
                              </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </section>

    <!-- contenedor de proyecto abierto ----------------------------------------------------------------------------------- -->
    <section id="project"></section>
   <!-- bottom de proyecto con llamada a la acción ------------------------------------------------------------------------ -->
    <section id="call" class="d-none">
        <div class="container">
            <div class="d-flex flex-column flex-lg-row justify-content-center justify-content-lg-between align-items-center bg-dark text-light p-5 mbCall">
                <h3 id="txtCall" class="mb-0 text-center text-lg-start m-lg-0 mb-4">Llamado a la acción</h3>
                <button class="btn btn-light btn-wasap rounded-pill px-4 d-flex justify-content-center align-items-center" type="button">
                    <i class="bi bi-whatsapp me-2" style="font-size: 1.5rem;"></i>
                    <span id="btnCall" class="mb-0">Agendar llamada</span>
                </button>
            </div>
        </div>
    </section>
    <section id="galeria">
        <!-- Header de la sección con el filtro -->
        <header class="container text-end mb-3">
            <select id="categoryFilter" class="form-select focus-custom rounded-0"></select>
        </header>
        
        <!-- Contenedor de la galería de proyectos -->
        <div id="output"></div>
    </section>

<!-- VER TODOS LOS PROYECTOS ------------------------------------------------------------------------ -->
    <section>
        <div id="botoneraTodo" class="container d-block">
            <div class="d-flex justify-content-center align-items-center mb-5">
                <button id="verTodo" class="btn btn-dark rounded-pill px-4 d-flex justify-content-center align-items-center d-block" type="button">
                    <i class="bi bi-arrow-down-up me-2" style="font-size: 1.3rem;"></i>
                    <span id="btnTodo" class="mb-0">Ver todos los proyectos</span>
                </button>
            </div>
        </div>
    </section>

    <!-- contenedor de blog ----------------------------------------------------------------------------------- -->
    <section id="blog">
        <div class="container mb-5">
            <header class="d-flex justify-content-between">
                <h4 class="text-dark pb-4"><i class="bi bi-border-width me-3"></i>Blog</h2>
                <ul class="d-flex list-unstyled h4">
                    <a href="https://wa.me/+5493765252764?text=Hola, vi tu portfolio y tengo una consulta" target="_blank"><li><i class="bi bi-whatsapp me-4 social"></i></li></a>
                    <a href="https://instagram.com/luciano.candotti" target="_blank"><li><i class="bi bi-instagram me-4 social"></i></li></a>
                    <a href="https://github.com/luchocandotti" target="_blank"><li><i class="bi bi-github social"></i></li></a>
                </ul>
            </header> 
            <div class="accordion" id="blog">
                <!-- BLOG 1 -->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed rounded-0 accordion-custom" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                            <span class="me-3">Instagram + PedidosYa: ¿Por qué no es suficiente para hacer crecer tu negocio?</span>
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#blog">
                        <div class="accordion-body lh-base h6 accordion-text row">
                            <div class="col-12 col-md-6 mb-3 mb-md-0">
                                <strong>Si tenés un emprendimiento gastronómico,</strong> seguramente ya estás usando Instagram para mostrar tus productos y PedidosYa para las ventas. Es lógico: son plataformas que tus clientes ya conocen y confían. Pero si querés <strong>hacer crecer tu negocio en serio,</strong> estas herramientas no son suficientes.
                            </div>
                            <div class="col-12 col-md-6">
                                <strong>El problema oculto de depender de terceros:</strong> aunque Instagram y PedidosYa te den ventas inmediatas, están limitando tu crecimiento de formas que quizás no habías considerado.<br><br>
                                <span class="cursor me-2">+</span><a href="blog1.html">seguir leyendo</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- BLOG 2 -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed rounded-0 accordion-custom" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                            <span class="me-3">El problema del 'viral por viral'</span>
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#blog">
                        <div class="accordion-body lh-base h6 accordion-text row">
                            <div class="col-12 col-md-6 mb-3 mb-md-0">
                                Por qué tu contenido viral no te está generando ventas (y qué hacer al respecto). Tu último video tuvo 50,000 visualizaciones. Los comentarios no paran. Tu contador de seguidores creció 500% esta semana. Pero cuando revisás las ventas del mes...nada cambió.
                            </div>
                            <div class="col-12 col-md-6">
                                <strong>Bienvenido al problema del 'viral por viral': </strong>contenido que explota en redes pero no explota tus ingresos.<br><br>
                                <span class="cursor me-2">+</span><a href="blog2.html">Seguir leyendo</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- BLOG 3 -->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed rounded-0 accordion-custom" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                            <span class="me-3">El Excel que maneja tu negocio te está costando más de lo que pensás</span>
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#blog">
                        <div class="accordion-body lh-base h6 accordion-text row">
                            <div class="col-12 col-md-6 mb-3 mb-md-0">
                                Arrancaste con una planilla de Excel porque era lo más rápido. Registrás ventas, controlás stock, manejás clientes. Funciona...hasta que no funciona más.<strong> Si tu negocio está creciendo pero sentís que cada día es más caótico, el problema no es que vendés más.</strong> El problema es que seguís operando como cuando vendías menos.
                            </div>
                            <div class="col-12 col-md-6">
                                <strong>La respuesta es integrar tus procesos en un sistema que trabaje para vos, no contra vos.</strong> En equipo con Foreman™ podemos ofrecerte una solución completamente custom.
                                <br><br>
                                <span class="cursor me-2">+</span><a href="blog3.html">Seguir leyendo</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="fondo-color"></div>

    <div id="floating-button" class="position-fixed bottom-0 start-50 translate-middle-x mb-4 d-flex gap-3 d-none">
            <button type="button" id="floating-button-prev" class="col btn btn-dark rounded-circle shadow-lg"><i class="bi bi-arrow-left" style="font-size: 1.5rem;"></i></button>
            <button type="button" id="floating-button-x" class="col btn btn-dark rounded-circle shadow-lg"><i class="bi bi-x-lg" style="font-size: 1.5rem;"></i></button>
            <button type="button" id="floating-button-next" class="col btn btn-dark rounded-circle shadow-lg"><i class="bi bi-arrow-right" style="font-size: 1.5rem;"></i></button>
    </div>
    
   <script>

    let category = 'destacado';
    let filtro = false;
    let openProject;
    let close;
    let limite = [];
    getGrilla();

    // Convertimos en Array los datos de Category dentro del JSON
    /* Se utiliza en dos intancias, primero se genera la lista de <select> y luego cada vez que se carga una categoría en la galería */
    function parseCategories(categoryString) {
        if (!categoryString) return [];
  
        return categoryString
            .replace(/^\[|\]$/g, '') // Quita corchetes solo si están al principio/final
            .split(',')
            .map(cat => cat.trim())
            .filter(cat => cat.length > 0); // Elimina categorías vacías
    }

    /* Esta función se debe ejecutar después de cargar el JSON
    Lo que hace es leer todas las categorías presentes en el JSON y hacer una lista para ponerla dentro del desplegable <select> */
    function generarSelectorCategorias(data) {
    // Guardar la selección actual O usar la categoría inicial si no hay selección previa
    const seleccionActual = categoryFilter.value || category;
    
        // Crear un conjunto para almacenar categorías únicas
        const categoriasUnicas = new Set();
        
        // Recorrer todos los elementos del JSON
        data.forEach(post => {
            const categorias = parseCategories(post.category);
        
            // Añadir cada categoría al conjunto
            categorias.forEach(cat => {
                if (cat) categoriasUnicas.add(cat);
            });
        });
        
        // Convertir el conjunto a un array y ordenarlo alfabéticamente
        const arrayCategorias = Array.from(categoriasUnicas).sort();
        
        // Crear las opciones HTML usando map
        const opcionesHTML = arrayCategorias.map(cat => 
        `<option value="${cat}">${cat.charAt(0).toUpperCase() + cat.slice(1)}</option>`
        ).join('');
        
        // Crear la opción "Todos los proyectos"
        const opcionTodos = '<option value="">Todos los proyectos</option>';
        
        // Actualizar el HTML del select
        categoryFilter.innerHTML = opcionTodos + opcionesHTML;
        // Establecer la selección anterior
        categoryFilter.value = seleccionActual;
    }

    const categoryFilter = document.getElementById('categoryFilter');
    const btnTodo = document.getElementById('btnTodo');
    const botoneraTodo = document.getElementById('botoneraTodo');


    // ESTA FUNCION CARGA LA GRILLA DE PROYECTOS ------------------------------------------------------------------------- //
    function getGrilla() {
        fetch('post.json')
        .then((res) => res.json())
        .then((data) => {
            // Generar las opciones del selector de forma dinámica
            generarSelectorCategorias(data);
            // Mostramos algún indicador de carga
            document.getElementById('output').innerHTML = '<div class="text-center p-5"><div class="spinner-border" role="status"><span class="visually-hidden">Cargando...</span></div></div>';
            
            // Creamos un array para almacenar todas las promesas de carga de imágenes
            const imagePromises = [];
            let output = '';

            // Filtramos data acá
            const dataFiltrada = data.filter(post => {
                // Si el filtro está vacío (''), devolver todos los elementos
                if (category === '') {
                    botoneraTodo.classList.remove('d-block');
                    botoneraTodo.classList.add('d-none');
                    return true; // Esto se llama retorno temprano, para evitar cálculos innecesarios. Todo lo que sigue en la function no se ejecuta
                }
                /* Solo cuando category tiene un valor, necesitamos hacer el trabajo adicional de parsear la cadena y verificar si incluye la categoría buscada. */
                const categorias = parseCategories(post.category);
                botoneraTodo.classList.remove('d-none');
                botoneraTodo.classList.add('d-block');
                // Verifica si la categoría que buscamos está en el array
                return categorias.includes(category);
            });


            dataFiltrada.forEach(function(post){
                /* Construímos los divs con la info + las imgs

                Dentro del div usamos col-lg-4 separa la grilla en 3 en pantalla grande
                col-md-6 separa la grilla en 3 en pantalla mediana, y en pequeño se apila todo a 1 columna
                img-fluid es para que sea flexbox  */
                const imgPath = `./img/${post.id}/1.jpg`;
                limite.push(Number(post.id));

                output += `
                    <div id="${post.id}" class="col-lg-4 col-md-6 pb-4">
                        <div class="card bg-light px-3 shadow-lg rounded-0 hover">
                            <h3 class="fs-4 text-dark pt-3 pb-2">${post.title}</h3>
                            <div class="overflow-hidden">
                                <a href="javascript:getProject('${post.id}')">${/* acá es donde elegimos qué proyecto deseamos cargar*/''}
                                   <img class="img-fluid rounded-0" src="./img/${post.id}/1.jpg">
                                </a>
                            </div>
                            <p class="pt-3 text-muted">${post.intro}</p>
                        </div>
                    </div>
                `;

                // Creamos una promesa para cada imagen
                const imagePromise = new Promise((resolve, reject) => {
                    const tempImg = new Image();
                    tempImg.onload = () => resolve();
                    tempImg.onerror = () => reject();
                    tempImg.src = imgPath;
                });
                
                imagePromises.push(imagePromise);
            });

            let galeria =`
                <div class="container py-4">
                    <div class="row">
                        ${output}
                    </div>
                </div>
            `;

            Promise.all(imagePromises)
                .then(() => {
                // Todas las imágenes se han cargado, actualizamos el contenido y navegamos
                /* 
                Inicialmente usaba document.getElementById('output').innerHTML = proyecto; 
                Hablando con Claude y estudiando con Traversy, veo que este tipo de prácticas 'linyeras' pueden llevar a problemas cuando una app web es más grande de lo que estoy manejando ahora, o supongo, en un dispositivo viejo o con poca capacidad.
                */
                const temp = document.createElement('div');
                temp.innerHTML = galeria;
                document.getElementById('output').replaceChildren(...temp.childNodes);

                if (filtro === true){
                    setTimeout(() => {
                        categoryFilter.scrollIntoView({ behavior: "smooth" });
                    }, 100); // Pequeño delay para asegurar que todo esté renderizado
                    filtro = false;
                }

                console.log(limite);
                console.log('se cargó todo en la galeria');
                })
                .catch(() => {
                // En caso de error en alguna imagen, mostramos el contenido de todas formas
                const temp = document.createElement('div');
                temp.innerHTML = galeria;
                document.getElementById('output').replaceChildren(...temp.childNodes);
                });
        })
    };

    // Cambio al selector de categorías
    categoryFilter.addEventListener('change', function() {
        // Actualizar la variable category con el valor seleccionado
        category = this.value;
        console.log('Categoría seleccionada:', category);
    
        // Volver a ejecutar getGrilla para actualizar la visualización
        filtro = true;
        limite.splice(0, limite.length);
        getGrilla();
    });


    //BOTONERA -------------------------------------------------------------------------------------------------------------- //
    const btnPrev = document.getElementById('floating-button-prev');
    const btnX = document.getElementById('floating-button-x');
    const btnNext = document.getElementById('floating-button-next');
    // Cargar proyecto anterior (ID actual - 1)
    /* El problema estaba en que quería cargar en el ID del project, el indexOf del array, y son dos cosas separadas, el indexOf contiene el valor del ID => Por eso funcion primero fijar el currentIndex (openProject) y luego hacer el calculo para paginar <-> 
    Al final, pude simplificar con una variable menos, pues con 'let prevProjectId = limite[openProject - 1]' ya alcanza.'
    */

    /*btnPrev.addEventListener('click', function() {
        let currentIndex = openProject;
        let prevProjectId = limite[currentIndex - 1];
        getProject(String(prevProjectId));
    });*/

    btnPrev.addEventListener('click', function() {
        let prevProjectId = limite[openProject - 1];
        getProject(String(prevProjectId));
    });
    // Cerrar proyecto
    btnX.addEventListener('click', getClose);
    // Cargar proyecto siguiente (ID actual + 1)
    btnNext.addEventListener('click', function() {
        let nextProjectId = limite[openProject + 1];
        getProject(String(nextProjectId));
    });
    /* btnTodo.addEventListener('click', function() {
        //acá debería utilizar el desplegable para colocar la categoria '' en vez de renombrar todo
        category = '';
        categoryFilter.value = '';
        limite = [];
        getGrilla();
    }); */
    btnTodo.addEventListener('click', function() {
        // Cambiar el valor del selector
        categoryFilter.value = '';
        // Disparar el evento 'change' del selector para que ejecute su lógica
        categoryFilter.dispatchEvent(new Event('change'));
    });

    // Mostrar u ocultar btns según paginación
    function paginador(){
        if (openProject === 0) {
            btnPrev.classList.add('d-none');
            btnPrev.classList.remove('d-block');
        } else {
            btnPrev.classList.add('d-block');
            btnPrev.classList.remove('d-none');
        }
    
        // Ocultar botón Next si estamos en el último elemento
        if (openProject === limite.length - 1) {
            btnNext.classList.add('d-none');
            btnNext.classList.remove('d-block');
        } else {
            btnNext.classList.add('d-block');
            btnNext.classList.remove('d-none');
        }
    };

    // Call
    const call = document.getElementById('call');

    // ESTA FUNCION CARGA EL PROYECYO (arriba de la galería) --------------------------------------------------------------- //

    function getProject(id) {
        openProject = limite.indexOf(Number(id));
        close = id;
        // Actualizar la URL con el hash sin recargar la página
        history.pushState(null, null, `#${id}`);

        fetch('post.json')
        .then((res) => res.json())
        .then((data) => {
            // Encontramos el proyecto con id al que hicimos click
            const project = data.find(project => project.id === id);

            // Verificamos que encontramos el proyecto
            if (project) {
                // Posicionamos el scroll
                const proj = document.getElementById('project');
                const botonera = document.getElementById('floating-button');
                proj.scrollIntoView({ behavior: "smooth" });
                // Mostramos algún indicador de carga
                proj.innerHTML = '<div class="text-center p-5"><div class="spinner-border" role="status"><span class="visually-hidden">Cargando...</span></div></div>';

                botonera.classList.remove('d-none');
                botonera.classList.add('d-block');
            
                const imagePromises = [];
                let imgInsert = '';

                for (let img = 2; img <= project.cant; img++) {
                if (project.video != '') {
                    const cantidad = project.cant - project.video;
                        // Hay imagenes y videos
                        if (img <= cantidad) {
                        // Es una imagen
                        const imgPath = `./img/${project.id}/${img}.jpg`;
                        imgInsert += `<img class="img-fluid pb-4" src="${imgPath}">`;
                        
                        // Creamos una promesa para la imagen
                        const imagePromise = new Promise((resolve, reject) => {
                            const tempImg = new Image();
                            tempImg.onload = () => resolve();
                            tempImg.onerror = () => reject();
                            tempImg.src = imgPath;
                        });
                        imagePromises.push(imagePromise);
                        } else {
                        // Es un video
                        const videoPath = `./img/${project.id}/${img}.mp4`;
                        const poster = `./img/${project.id}/${img}.jpg`;
                        imgInsert += `<video class="w-100 pb-4" controls disablePictureInPicture controlsList="nodownload" playsinline poster="${poster}" src="${videoPath}"></video>`;
                        
                        // Creamos una promesa para el video
                        const videoPromise = new Promise((resolve, reject) => {
                            const tempVideo = document.createElement('video');

                            const videoLoaded = () => resolve();
                            tempVideo.addEventListener('loadeddata', videoLoaded);
                            tempVideo.addEventListener('canplaythrough', videoLoaded);
                            tempVideo.onloadeddata = () => resolve();
                            tempVideo.onerror = () => reject();
                            tempVideo.src = videoPath;
                        });
                    }
                } else {
                    // Solo hay imágenes
                    const imgPath = `./img/${project.id}/${img}.jpg`;
                    imgInsert += `<img class="img-fluid pb-4" src="${imgPath}">`;
                    
                    // Creamos una promesa para la imagen
                    const imagePromise = new Promise((resolve, reject) => {
                    const tempImg = new Image();
                    tempImg.onload = () => resolve();
                    tempImg.onerror = () => reject();
                    tempImg.src = imgPath;
                    });
                    imagePromises.push(imagePromise);
                }
            }
  
            // Construimos el contenedor con todas las imágenes
            /* 
                Esto es lo que teóricamente está mal, porque en vez de crear los elementos ortodoxamente, lo estoy haciendo en modo 'linyera', por el momento es un proyecto chico y no parece haber problemas, pero debo considerarlo cuando codee programas más robustos.
            */
            let proyecto = `
                <div class="container">
                <hr class="border border-muted">
                <h1 class="pt-3 pb-4 text-dark">${project.title}</h1>
                <div class="row pb-4">
                    <div class="col-12 col-md-6 mb-md-0 h6">
                        <h2 class="text-dark fw-light lh-base h6">${project.descript1}</h2>
                    </div>
                    <div class="col-12 col-md-6 mb-md-0 h6">
                        <h2 class="text-dark fw-light lh-base h6">${project.descript2}</h2>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class="col-12 col-md-6 mb-3 mb-md-0 text-muted">
                    <p>${project.intro}</p>
                    </div>
                    <div class="col-12 col-md-6 mb-3 text-md-end text-muted lh-sm">
                    <p>${project.date}<br><a id="linkIcon" href="https://${project.link}/" target="_blank"><i class="bi bi-link-45deg align-text-middle fs-5 pe-2" style="position: relative; top: 1.7px"></i>${project.link}</a></p>
                    </div>
                </div>
                    ${/* falta una forma de cerrar el proyecto que sea piola */''}
                    <div class="row">
                        ${imgInsert}
                    </div>
                </div>
            `;
  
            // Esperamos a que todas las imágenes se carguen antes de mostrar el contenido
            Promise.all(imagePromises)
                .then(() => {
                // Todas las imágenes se han cargado, actualizamos el contenido y navegamos
                const temp = document.createElement('div');


                temp.innerHTML = proyecto;
                proj.replaceChildren(...temp.childNodes);

                //ACÁ VOLVÍ A USAR EL SCROLL, porque no es lo mismo el scroll del loader, que el scroll del proyecto.
                proj.style='scroll-margin-top: -2px';
                proj.scrollIntoView({ behavior: "smooth" });

                detenerIntervalo();
                activo = false;

                if (project.call){
                    const txtCall = document.getElementById('txtCall');
                    const btnCall = document.getElementById('btnCall');

                    txtCall.innerText = project.call;
                    btnCall.innerText = project.btnCall;
                    btnCall.setAttribute('data-title', project.title);

                    btnCall.addEventListener('click', function() {
                        const title = btnCall.getAttribute('data-title');
                        const mensaje = `Hola, estuve viendo el proyecto ${title} y tengo una consulta`;
                        const url = `https://wa.me/+5493765252764?text=${encodeURIComponent(mensaje)}`;
                        window.open(url, '_blank');
                    });
                    call.classList.remove('d-none');
                    call.classList.add('d-block');
                } else {
                    call.classList.remove('d-block');
                    call.classList.add('d-none');
                }

                paginador();
                
                console.log(`se cargó todo en el proyecto número ${id}: ${project.title} que esá posicionado en el index ${openProject} del array de ${category}''`);
                    // Evaluamos si el proyecto posee link
                    if (project.link == ''){
                        document.getElementById('linkIcon').style.display = 'none';
                    } else {
                        document.getElementById('linkIcon').style.display = '';
                    }
                })
                .catch(() => {
                // En caso de error en alguna imagen, mostramos el contenido de todas formas
                const temp = document.createElement('div');
                temp.innerHTML = proyecto;
                proj.replaceChildren(...temp.childNodes);

                detenerIntervalo();
                activo = false;
                });
            }
        })
        .catch(error => {
        console.error("Error al cargar los datos:", error);
        });
    };

    // Función para manejar cambios en el hash de la URL------------------------------------------------------------------- //
    /*function handleHashChange() {
        const hash = window.location.hash;
        if (hash) {
            // Extraer el ID del hash (eliminando el símbolo #)
            const projectId = hash.substring(1);
            console.log(projectId);
                if (hash==='blog'){
                    document.getElementById('blog').scrollIntoView({ behavior: 'smooth' });
                    getClose();
                } else if (!isNaN(projectId) && projectId.trim() !== '') { // Verificar que el ID sea un número
                    // Posicionamos el scroll al inicio del contenedor de proyecto
                    // antes de cargar el nuevo proyecto
                    document.getElementById('project').scrollIntoView({ behavior: 'smooth' });
                    // Cargar el proyecto correspondiente
                    getProject(projectId);
                }
                } else {
                // Si no hay hash, significa que estamos en la landing
                // Cerrar el proyecto abierto
                getClose();
                }
    }*/

    function handleHashChange() {
    const hash = window.location.hash;
        if (hash) {
            // Extraer el ID del hash (eliminando el símbolo #)
            let hashValue = hash.substring(1);
            
            if (hashValue === 'blog') {
                document.getElementById('blog').scrollIntoView({ behavior: 'smooth' });
                close = '';
                getClose(hashValue);
            } else {
                // Verificar que el ID sea un número para proyectos
                if (!isNaN(hashValue) && hashValue.trim() !== '') {
                    // Posicionamos el scroll al inicio del contenedor de proyecto
                    // antes de cargar el nuevo proyecto
                    document.getElementById('project').scrollIntoView({ behavior: 'smooth' });
                    // Cargar el proyecto correspondiente
                    getProject(hashValue);
                }
            }
        } else {
            // Si no hay hash, significa que estamos en la landing
            // Cerrar el proyecto abierto
            getClose();
        }
    };

    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.accordion-button').forEach(button => {
            button.addEventListener('click', function() {
                setTimeout(() => {
                    const isCollapsed = this.classList.contains('collapsed');
                    
                    if (isCollapsed) {
                        // Se está cerrando: quitar hash SIN hacer scroll
                        history.replaceState(null, null, window.location.pathname + window.location.search);
                    } else {
                        // Se está abriendo: agregar #blog
                        window.location.hash = 'blog';
                    }
                    
                    // Ejecutar handleHashChange en ambos casos
                    handleHashChange();
                }, 150);
            });
        });
    });

    // Cerramos el proyecto y volvemos a la galería------------------------------------------------------------------------ //
    function getClose(hashValue){
            // Actualizar la URL eliminando el hash sin recargar la página
            if (hashValue !== 'blog'){
                console.log('borramos el #');
                history.pushState(null, null, window.location.pathname);
            }
        document.getElementById('project').replaceChildren();
        
        document.getElementById('floating-button').classList.remove('d-block');
        document.getElementById('floating-button').classList.add('d-none');

        call.classList.remove('d-block');
        call.classList.add('d-none');

        // Volver el scroll al último proyecto abierto
        if (close) {
        const projectElement = document.getElementById(close);
            if (projectElement) {
                projectElement.style='scroll-margin-top: 20px';
                projectElement.scrollIntoView({ behavior: 'smooth' });
            }
        }
    };

    // Inicializar: verificar si hay un hash en la URL al cargar la página
    document.addEventListener('DOMContentLoaded', function() {
        // Verificar si hay un hash en la URL inicial
        handleHashChange();
        
        // Escuchar cambios en el hash (por si el usuario usa los botones de navegación del navegador)
        window.addEventListener('hashchange', handleHashChange);
    });


    // Cambiar el color del fondo ----------------------------------------------------------------------------------------- //
    const colores = [
    "#F39C12", "#2ECC71", "#1188F2", "#9B59B6", "#F25E11",
    "#F2D211", "#B38439", "#959595"
    ];

    let indice = 0;
    let intervaloID = null; // para guardar el ID del setInterval
    let activo = false; // esto controla si está encendido o apagado
    const fColor = document.getElementById('fondo-color');

    function iniciarIntervalo() {
        if (intervaloID === null) { // prevenir múltiples intervalos superpuestos
            // Cambiar color inmediatamente
            fColor.style.backgroundColor = colores[indice];
            indice = (indice + 1) % colores.length;
            // Después arrancar el intervalo
            intervaloID = setInterval(() => {
            fColor.style.backgroundColor = colores[indice];
            //document.body.style.backgroundColor = colores[indice];
            indice = (indice + 1) % colores.length;
            }, 3000);
        }
    }

    function detenerIntervalo() {
        clearInterval(intervaloID);
        intervaloID = null; // reiniciar
        fColor.style.display = "none";
    }

    document.getElementById('color').addEventListener("click", () => {
        if (!activo) {
            fColor.style.display = "block";
            openProject=false;
            iniciarIntervalo();
        } else {
            fColor.style.display = "none";
            detenerIntervalo();
        }
        activo = !activo; // alterna entre true/false
    });

    // MOVER SCROLL SEGÚN TOGGLE EN SKILLS--------------------------------------------------------------------------------- //
    document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("skillsToggle");
    const aboutSection = document.getElementById("toggle");

        toggle.addEventListener("change", function () {
            if (toggle.checked) {
            console.log("Toggle activado");
            aboutSection.scrollIntoView({ behavior: "smooth" });
            } else {
            console.log("Toggle desactivado");
            window.scrollTo({ top: 0, behavior: "smooth" });
            }
        });
    });

   </script>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>
</html>